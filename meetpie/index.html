<!doctype html>
<meta charset=utf-8>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Meet pie</title>
<script src="js/react.development.js"></script>
<script src="js/react-dom.development.js"></script>
<script src="js/react-router-dom.min.js"></script>
<script src="js/babel.min.js"></script>

<style>
:root {
  --neutral-1: hsl(42, 15%, 13%);
  --neutral-2: hsl(40, 13%, 23%);
  --neutral-3: hsl(37, 11%, 28%);
  --neutral-4: hsl(41, 9%, 35%);
  --neutral-5: hsl(41, 8%, 48%);
  --neutral-6: hsl(41, 8%, 61%);
  --neutral-7: hsl(39, 11%, 69%);
  --neutral-8: hsl(40, 15%, 80%);
  --neutral-9: hsl(43, 13%, 90%);
  --neutral-10: hsl(40, 23%, 97%);

  --yellow-background: hsl(54, 100%, 90.2%);
  --green-dark: hsl(106.5, 40%, 30%);
  --green: hsl(106.5, 46.1%, 47.3%);
  --green-light: hsl(106.5, 66.1%, 87%);
}

@font-face {
  font-family: "Sniglet";
  src: local("Sniglet Regular"),
       url(fonts/Sniglet/Sniglet-Regular.ttf);
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: "Sniglet";
  src: local("Sniglet ExtraBold"),
       url(fonts/Sniglet/Sniglet-ExtraBold.ttf);
  font-weight: 800;
  font-style: normal;
}

* {
  box-sizing: border-box;
}
html, body {
  padding: 0;
  margin: 0;
  color: var(--neutral-1);
  font-family: sans-serif;
}

#container {
  position: relative;
  width: 100vw;
  height: 100vh;
}
.app {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.app > .screens {
  position: relative;
  flex: 1;
  overflow: hidden;
  transform: translate(0px);
}
.app > .screens > * {
  background: var(--neutral-10);
  height: 100%;
}

.tab-bar {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  width: 100%;
  height: 3.5em;
  box-shadow: 0px -2px 2px 0px var(--neutral-9);
  z-index: 1;
  position: relative;
  /* This stop the scrollbar from flashing on while the animation is in progress */
  overflow: hidden;
}
.tab-bar a {
  position: relative;

  flex: 0 0 33.3%;
  font-family: Sniglet;
  color: var(--green-dark);
  font-size: 20px;
  text-decoration: none;
  padding: .25em .75em;

  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2;

  outline: none;
}
@media screen and (max-width: 400px) {
  .tab-bar a {
    font-size: 15px;
  }
}
.tab-bar a::before {
  content: "";
  display: inline-block;
  position: relative;
  width: 1em;
  height: 1em;
  margin-right: .5rem;
}
.tab-bar a.pictures::before {
  background-image: url(img/piectures.svg);
}
.tab-bar a.polls::before {
  background-image: url(img/piechart.svg);
}
.tab-bar a.finder::before {
  background-image: url(img/piender.svg);
}
.tab-bar a::after {
  content: "";
  position: absolute;
  width: 90%;
  height: 100%;
  z-index: -1;

  background: var(--green-light);
  border-radius: .25em;

  transition: opacity .15s, transform cubic-bezier(.13,.27,.59,1.59) .2s;
  opacity: 0;
  transform: scale(0);
}
.tab-bar a[aria-selected=true]::after {
  opacity: 1;
  transform: scale(1);
}

.tab-panel {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  background: var(--neutral-10);
  transition: transform 300ms ease;
  will-change: transform;
}
.tab-panel.active {
  transform: none;
  z-index: 1;
}
.tab-panel:not(.active) {
  pointer-events: none;
  transform: translate(100%);
  transition-delay: 300ms;
}
.tab-panel > p {
  padding: 0 1em;
}

.photo-list {
  max-width: 500px;
  margin: 0 auto;
}
.photo {
  border: 1px solid var(--neutral-6);
  margin-bottom: 1em;
}
.photo > .header {
  display: flex;
  align-items: center;
  min-height: 3em;
  padding: 1em;

  background: white;
}
.photo > .header > .author {
  font-weight: bold;
  margin-right: .5em;
}
.photo > .header > .date {
  color: var(--neutral-6);
}
.photo > img {
  width: 100%;
}
.photo > .footer {
  background: white;
  padding: 1em;
}
.photo > .footer > .comments > .comment {
  margin-top: .5em;
}
.photo > .footer > .comments > .comment > .author,
.photo > .footer > .comments > .comment > .comment {
  display: inline;
}
.photo > .footer > .comments > .comment > .author {
  font-weight: bold;
  margin-right: .5em;
}
.photo > .footer > .comment-link {
  margin-top: .5em;
  color: var(--neutral-6);
}

.story-summary {
  padding: 1em;
  margin: 1em;
  background: white;
  border: 1px solid var(--neutral-7);
  border-radius: 10px;
  box-shadow: 2px 2px 2px var(--neutral-8);
}
.story-summary > .header {
  font-size: large;
  margin-bottom: .5em;
}
.story-summary > .header .title {
  font-weight: bold;
  margin-right: 1em;
}
.story-summary > .header .author {
  display: inline-block;
  color: var(--neutral-4);
}

.note-list {
  padding: 1em;
}
.note {
  box-sizing: border-box;
  box-shadow: 0px 1px 3px var(--neutral-8);
}
.note > .content {
  background: var(--yellow-background);
  padding-left: .5rem;
  padding-top: .5rem;
  padding-bottom: .5rem;
}
.note > .content > textarea {
  font-family: sans-serif;
  background: transparent;
  border: none;
  min-height: 150px;
  width: 100%;
  resize: vertical;
}

@supports (display: grid) {
  .note {
    display: grid;
    grid-template-columns: auto 1rem;
    grid-template-rows: 1rem;
    border-radius: 0 1.6rem 0 0;
  }

  .note > .cornerfiller {
    background: var(--yellow-background);
  }

  .note > .corner {
    width: 1rem;
    height: 1rem;
  }

  .note > .content {
    grid-row-end: span 2;
  }
}

@supports not (display: grid) {
  .note {
    background: var(--yellow-background);
  }

  .note > .corner, .note > .cornerfiller {
    display: none;
  }
}
</style>
<div id=container></div>
<script type="text/babel">
const { HashRouter, Link, Route, Switch } = ReactRouterDOM;

function TabPanel(props) {
  let className = 'tab-panel';
  if (props.active) {
    className += ' active';
  }

  return <div className={className}>{props.children}</div>;
}

function Photo(props) {
  return (
    <article className="photo">
      <div className="header">
        <span className="author">{props.author}</span>
        <span className="date">{props.date}</span>
      </div>
      <img src={props.src} />
      <div className="footer">
        <div className="description">{props.description}</div>
        <div className="comments">
          {props.comments.map(comment => (
            <div className="comment">
              <div className="author">{comment.author}</div>
              <div className="comment">{comment.comment}</div>
            </div>
          ))}
        </div>
        <div className="comment-link">Comment...</div>
      </div>
    </article>
  );
}

function Photos(props) {
  return (
    <TabPanel active={props.active}>
      <div className="photo-list">
        <Photo author="Bristol bandit"
          date="30 Mar 2019"
          description="The best meat pie in the universe üá¨üáß"
          src="img/pieminister-1.jpg"
          comments={[
            { author: 'Jessie', comment: 'ü§§' }
          ]}/>
        <Photo author="Pied piper"
          date="29 Mar 2019"
          description="Ozzie ozzie ozzie!"
          src="img/oji-pie.jpg"
          comments={[
            { author: 'Bogan', comment: 'Oi oi oi!' }
          ]}/>
        <Photo author="Japan man"
          date="29 Mar 2019"
          description="Best meat pies in Tokyo are at Punk Doily üóº"
          src="img/punk-doily-3.jpg"
          comments={[]}/>
        <Photo author="Pie fan"
          date="28 Mar 2019"
          description="Still life with pie"
          src="img/still-life.jpg"
          comments={[
            { author: 'Jessie', comment: 'It\'s beautiful üò¢' },
            { author: 'steaklover', comment: 'What\'s the salad for?' },
            { author: 'Pie fan', comment: 'Aesthetic value' },
            { author: 'steaklover', comment: 'üëç' },
          ]}/>
        <Photo author="Bristol bandit"
          date="27 Mar 2019"
          description="Pie minister does it again"
          src="img/pieminister-2.jpg"
          comments={[]}/>
      </div>
    </TabPanel>
  );
}

function StorySummary(props) {
  return (
    <div className="story-summary">
      <div className="header">
        <span className="title">{props.title}</span>
        <span className="author">{props.author}</span>
      </div>
      {props.children}
    </div>
  );
}

function Stories(props) {
  return (
    <TabPanel active={props.active}>
      <StorySummary title="Winnie the Pooh" author="A. A. Milne">
        Likes hunny üçØ. Not too bright. Friends include a little pig and big
        donkey.
      </StorySummary>
      <StorySummary
        title="Goldilocks and the Three bears"
        author="Robert Southey">
        A story of <em>forced entry</em>, <em>theft</em>, and{' '}
        <em>destruction of property</em>. The inspiration for Firefox's choice
        of content processes.
      </StorySummary>
      <StorySummary title="Yogi bear" author="Hanna-Barbera">
        A tale of habitual <em>petty theft</em> at Jellystone park.
      </StorySummary>
      <StorySummary title="Paddington bear" author="Michael Bond">
        Escapee from Peru, found in London. Likes Marmalade.
      </StorySummary>
      <StorySummary title="Jungle book" author="Rudyard Kipling">
        More of a boy story than a bear story, but Baloo who is probably a sloth
        bear.
      </StorySummary>
    </TabPanel>
  );
}

function NoteCorner() {
  return (
    <svg className="corner" viewBox="0 0 100 100" role="presentation">
      <polygon fill="#FEFACF" points="0,0 100,100 0,100" />
      <path
        fill="#CCB92D"
        d="M0,0l100,100c0,0-69.5-4.5-78.4-7.09S8.9,85.5,7.2,78.76S0,0,0,0"
      />
      <path
        fill="#FCFBF1"
        d="M0,0l100,100c0,0-62.2-10.3-71-12.8s-12.7-7.4-14.4-14.1S0,0,0,0"
      />
    </svg>
  );
}

function Note() {
  return (
    <form className="note" autoComplete="off">
      <div className="content">
        <textarea defaultValue="Notes go here" />
      </div>
      <NoteCorner />
      <div className="cornerfiller" />
    </form>
  );
}

function Notes(props) {
  return (
    <TabPanel active={props.active}>
      <div className="note-list">
        <Note />
      </div>
    </TabPanel>
  );
}

function TabBar(props) {
  return (
    <nav className="tab-bar" role="tablist">
      {React.Children.map(props.children, (child, index) =>
        React.cloneElement(child, {
          role: 'tab',
          'aria-selected': index === props.position,
        })
      )}
    </nav>
  );
}

ReactDOM.render(
  <HashRouter hashType="noslash">
    <Route
      render={({ location }) => {
        let position = 0;
        if (location.pathname === '/polls') {
          position = 1;
        } else if (location.pathname === '/finder') {
          position = 2;
        }

        return (
          <div className="app">
            <div className="screens">
              <Photos active={position === 0} />
              <Stories active={position === 1} />
              <Notes active={position === 2} />
            </div>
            <TabBar position={position}>
              <Link to="" className="pictures">
                Piectures
              </Link>
              <Link to="/polls" className="polls">
                Pie polls
              </Link>
              <Link to="/finder" className="finder">
                Piender
              </Link>
            </TabBar>
          </div>
        );
      }}
    />
  </HashRouter>,
  document.getElementById('container')
);
</script>
